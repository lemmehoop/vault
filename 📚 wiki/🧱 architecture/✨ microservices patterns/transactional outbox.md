**Transactional Outbox** — это шаблон проектирования, который гарантирует **атомарность** при отправке событий в брокер сообщений (например, RabbitMQ, Kafka). Это решает проблему **несогласованности данных**, когда сообщение отправляется в очередь, но не фиксируется в базе данных (или наоборот).
***
**Принцип работы**
- отдельной таблицей хранится outbox - там хранятся сообщения перед отправкой
- сообщение записывается туда в той же транзакции, где происходит бизнес логика
- фоновый процесс получает оттуда сообщения и отправляет их в очередь сообщений
- после успешной отправки помечаем сообщение как отправленное или совсем удаляем
***
**Решаемые проблемы**
- при недоступности очереди сообщения не теряются
- можно добавить *idempotency key* для проверки на дублирование сообщений
- подход универсален