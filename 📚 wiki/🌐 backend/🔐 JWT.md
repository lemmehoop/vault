##### JWT
**JSON Web Token**
- стандарт надежной передачи информации от клиента к серверу и обратно
- хранит в себе информацию о пользователе и токене в формате `JSON` 
- для того, чтобы информацию нельзя было подменить, она подписывается
	- `HMACS` - шифрование с помощью секретного ключа и hash-функции
		- клиент и сервер оба знают один ключ, который присоединяется к информации и от высчитанного из этого хэша проверяется достоверность
	- `RSA / ECDSA` - асимметричное шифрование
		- используют публичный и приватный ключи
		- отправитель шифрует сообщение своим *приватным* ключом
		- пользователь расшифровывает его *публичным* ключом
***
**Состав**
`{header}.{payload}.{signature}`
Каждая из частей Base64 закодирована.
- `Header` - заголовок, содержит алгоритм шифрования и тип (всегда JWT)
- `Payload` - *claim*
	- информация о пользователе и его доступах
	- автор токена, время истечения токена
- `Signature` - подпись на основе заголовков и тела токена

![[Pasted image 20250716152302.png|500]]
***
**Алгоритм**
- пользователь аутентифицируется и получает токен от сервера авторизации
- при запросе на защищенные источники пользователь прикладывает в запросе этот токен
- для аутентификации достаточно проверить достоверность подписи
	- например, в случае, когда токен выдан `Keycloak` - в сервисе можно получить публичный ключ и расшифровать токен
- для авторизации из токена получаются нужные данные и сверяются
	- например, аудиенция токена или пермишены
