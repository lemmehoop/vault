##### Что такое BASE и ACID?
*BASE - семантика нереляционного мира*
**Basic Availability** states that there will be a response to any request, but, that response could still be a “failure” or the data may be inconsistent or changing state(ответом может быть ошибка, данные могут быть не консистентные или быть в состоянии изменения)
**Soft-state** - state of the system cloud change over time due to “eventual consistency” changes(формат БД может меняться из-за возможной согласованности)
**Eventual consistency** - states that the system will eventually become consistent, the system will continue to receive input and is not checking consistency every transaction before it moves onto the next one(консистентность данных не проверяется в каждой транзакции; в какой-то момент станет консистентной)

*ACID - требования к транзакционной системе*
**Atomicity** (атомарность) — выражается в том, что транзакция должна быть выполнена в целом или не выполнена вовсе.
**Consistency** (согласованность) — гарантирует, что по мере выполнения транзакций, данные переходят из одного согласованного состояния в другое, то есть транзакция не может разрушить взаимной согласованности данных.
**Isolation** (изолированность) — локализация пользовательских процессов означает, что конкурирующие за доступ к БД транзакции физически обрабатываются последовательно, изолированно друг от друга, но для пользователей это выглядит, как будто они выполняются параллельно.
**Durability** (устойчивость) — устойчивость к ошибкам — если транзакция завершена успешно, то те изменения в данных, которые были ею произведены, не могут быть потеряны ни при каких обстоятельствах.
##### Нормализация
*Атрибут* - свойство сущности (столбец)
*Домен атрибута* - допустимые значения атрибута
*Функциональная зависимость* - если два кортежа (строки в БД) совпадают по значению X, то они совпадают и по Y. `{X} -> {Y}`
Целью нормализации является исключение избыточности, что приведет к уменьшению аномалий.
**1 НФ** - все атрибуты являются атомарными и в таблице нет повторений кортежей
**2 НФ** - выполняется 1НФ и каждый не ключевой атрибут неприводимо зависит от первичного ключа. Т.е. не ключевой атрибут определяется именно полным первичным ключем, а не его частью. Если же все-таки не удовлетворяется - таблица разбивается.
**3 НФ** - выполняется 2НФ и каждый не ключевой атрибут не транзитивно зависит от первичного ключа. Т.е. нет ситуации, когда есть первичный ключ, который определяет поле, которое в свою очередь определяет третье. Тогда второе и третье поля нужно вынести отдельно. (Другая трактовка: в записи не должно быть неключевых полей, которые зависят от других неключевых значений).
**НФ Бойса-Кода** - 3НФ + ключевые атрибуты составного ключа не должны зависеть от неключевых атрибутов
**4 НФ** - 3НФ + в таблице нет многозначных зависимостей (A -> B && A -> C, but table is ABC). Т.е. меняя одну зависимость, мы неизбежно меняем и вторую.
##### Что такое индексы? Зачем они нужны? Как они работают? Какие популярные виды индексов существуют?
Чаще всего индексы реализованы как деревья, поэтому по их структуре поиск по критериям (по которым построен индекс), идет быстрее (до log n)
##### Что такое транзакции? Зачем они нужны?
Транзакция - какая непрерывная часть запроса к базе. Часть ее не прерывается: либо она выполняется полностью, либо не выполняется совсем.
##### Какие виды изолирования транзакций бывают?
**Грязное чтение** - транзакция получает доступ к данным, которые поменяли другие транзакции, но еще не зафиксировали.
**Неповторяемое чтение** - когда одна транзакция читает какие-то данные (перед began), что-то делает, читает по новой, а данные уже другие, потому что другая транзакция все поменяла (у одной записи).
**Фантомное чтение** - разное количество строк при одном и том же запросе внутри одной транзакции (в любой момент транзакции).

**Read Uncommitted** - самая плохая согласованность данных, но высокую скорость. Все транзакции видят незафиксированные изменения. Феномен грязного чтения тут есть
**Read Committed** - видно только то, что введено успешными транзакциями. Есть защита от грязного чтения
**Repeatable Read** - предотвращает феномен неповторяющегося чтения
**Serializable** - нормальный select, но транзакциями нельзя одновременно менять и удалять одни и те же строки
![[Pasted image 20250216182936.png]]
##### Что такое профилирование запросов?
Понятие того, насколько тяжелый запрос и попытки его оптимизировать.
Чаще всего делает так:
`explain select * from table`
##### Что такое шардирование? Зачем оно нужно?
Это разбиение одной большой базы данных на несколько маленьких кусков. Чаще всего делается на основании хэша. Нужно для того, чтобы распределить нагрузку.
##### Что такое репликация? Зачем она нужна?
Непрерывное получение изменений из БД-мастера и применение этих изменений на копиях. Может быть так, что оба - мастера, а может - один будет просто копией. Но в любом случае это улучшает доступность для чтения и записи и делает систему более отказоустойчивой.
##### Что такое JOIN'ы и какие они бывают?
Оператор объединения. LEFT, RIGHT, FULL OUTER JOIN, INNER
##### Что такое оконные функции и как они работают?

##### Чем отличается WHERE от HAVING?

##### Какие есть основные агрегатные функции?
COUNT, AVG, SUM, MIN, MAX
```sql
SELECT [литералы, агрегатные_функции, поля_группировки]
FROM имя_таблицы
GROUP BY поля_группировки;
```
##### Что такое вью?
Вью всегда содержит свежие данные, потому что при каждом запросе движок СУБД собирает все заново
```sql
CREATE VIEW _view_name_ AS  
SELECT _column1_, _column2_, ...  
FROM _table_name_  
WHERE _condition_;

CREATE VIEW [Products Above Average Price] AS  
SELECT ProductName, Price  
FROM Products  
WHERE Price > (SELECT AVG(Price) FROM Products);
```
##### Что такое FOREIGN KEY и зачем он нужен?
Это ссылка на объект в другой таблице
##### Чем EXPLAIN отличается от ANALYZE?
EXPLAIN просто покажет, какая стоимость будет
EXPLAIN ANALYZE покажет все и действительно выполнит этот запрос (покажет время планирования и время выполнения)